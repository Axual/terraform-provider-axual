# axual_schema_version (Resource)

Schema version resource. None of the fields can be updated. Read more: https://docs.axual.io/axual/2025.3/self-service/schema-management.html

## Required Roles
- SCHEMA_AUTHOR or SCHEMA_ADMIN

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `body` (String) Schema definition. For AVRO schemas, provide valid JSON. For PROTOBUF, provide .proto file content. For JSON_SCHEMA, provide valid JSON Schema definition.
- `version` (String) The version of the schema

### Optional

- `description` (String) A short text describing the Schema
- `owners` (String) The UID of the team owning this Schema
- `type` (String) The type of the schema. Valid values are: AVRO, PROTOBUF, JSON_SCHEMA. Defaults to AVRO if not specified.

### Read-Only

- `full_name` (String) Full name of the schema
- `id` (String) Schema version unique identifier
- `schema_id` (String) Schema unique identifier

## Note
- Please note that Updating the existing `axual_schema_version` is not supported and instead, you should either delete and create an updated `axual_schema_version` or create a new `axual_schema_version` with same schema name, and different version and different schema body.
- Please note that you might have the permission to delete the schema(as Schema Owner if owner is present) but you might not have the SCHEMA_AUTHOR role(in a Tenant where schema-roles-enforced=true) that is required to create the schema.
- The JSON formatting of schema body— such as whitespace, field ordering, and indentation— does not need to exactly match the schema body format stored in the Axual Platform Manager database, because the Axual Terraform Provider includes built-in functionality to determine whether schema bodies are semantically equivalent.

## Example Usage

```hcl
resource "axual_schema_version" "axual_gitops_test_schema_version1" {
  body = file("avro-schemas/gitops_test_v1.avsc")
  version = "1.0.0"
  description = "Gitops test schema version"
}
```
An example of having one schema with different schemaVersions:

first schema body

```json
{
  "type": "record",
  "name": "GitOpsTest1",
  "namespace": "io.axual.qa.general",
  "doc": "Object type that is supposed to be filled with a gitops test value. This should be used when the Key is irrelevant.",
  "fields": [
    {
      "name": "gitops1",
      "type": "string",
      "doc": "The gitops test value. v 1.0.0"
    }
  ]
}
```

second schema body

```json
{
  "type": "record",
  "name": "GitOpsTest1",
  "namespace": "io.axual.qa.general",
  "doc": "Object type that is supposed to be filled with a gitops test value. This should be used when the Key is irrelevant.",
  "fields": [
    {
      "name": "gitops1",
      "type": "string",
      "doc": "The gitops1 test value. v 1.0.0"
    },
    {
      "name": "gitops2",
      "type": "string",
      "doc": "The gitops2 test value. v 1.0.0"
    }
  ]
}
```
```hcl
resource "axual_schema_version" "axual_gitops_test_schema_version1" {
  body = file("avro-schemas/gitops_test_v1.avsc") // first schema body
  version = "1.0.0"
  description = "Gitops test schema version"
}

resource "axual_schema_version" "axual_gitops_test_schema_version2" {
  body = file("avro-schemas/gitops_test_v2.avsc") // second schema body
  version = "2.0.0"
  description = "Gitops test schema version"
}
```

Please refer to the full example of the latest Axual TerraForm provider, check https://github.com/Axual/terraform-provider-axual/tree/master/examples/axual.

## Import

To import you need a Schema Version UID, please note that Schema Version UID is different from Schema UID. Axual Schema contains one or more Axual Schema Versions.
Schema version UID is not directly visible from Axual Self Service UI. To view it:
1. Choose a Schema in UI
2. Click `View all versions`
3. Choose a schema version you would like to import
4. Open developer tools -> Network -> Look for this network call `api/schema_versions/<SCHEMA_VERSION_UID>`

Import is supported using the following syntax:

```shell
terraform import axual_schema_version.<RESOURCE_NAME> <SCHEMA_VERSION_UID>
terraform import axual_schema_version.test_schema_version b21cf1d63a55436391463cee3f56e393
```