# axual_application_principal (Resource)

An ApplicationPrincipal is a security principal (certificate or comparable) that uniquely authenticates an Application on an Environment. Read more: https://docs.axual.io/axual/2022.2/self-service/application-management.html#configuring-application-securityauthentication

## Limitations
- Axual Terraform Provider only support these authentication methods:
	- SSL (MUTUAL TLS) as a Certificate(PEM). To use it please provide a string with PEM certificate as principal property.
	- SASL (OAUTHBEARER) as a Custom Principal that specifies the ID referenced in URI and tokens. To use it please provide a string with PEM certificate as principal property. For example, 'my-client'.
- Read more: https://docs.axual.io/axual/2022.2/self-service/application-management.html#configuring-application-securityauthentication


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `application` (String) A valid UID of an existing application
- `environment` (String) A valid UID of an existing environment
- `principal` (String) The principal of an Application for an Environment

### Optional

- `custom` (Boolean) A boolean identifying whether we are creating a custom principal. If true, the custom principal will be stored in principal property.  Custom principal allows an application with SASL+OAUTHBEARER to produce/consume a topic. Custom Application Principal certificate is used to authenticate your application with an IAM provider using the custom ApplicationPrincipal as Client ID

### Read-Only

- `id` (String) Application Principal identifier

## Example Usage

```terraform
#Logged in Terraform User(by default kubernetes@axual.com) needs to have application admin rights(for create access request) and stream admin rights(for revoking access request) or be owner of the application and the stream (by being user in the same group as the application's and stream's owner group)
resource "axual_application_principal" "dev_dashboard_in_example_principal" {
  environment = "7237a4093d7948228d431a603c31c904"
  application = axual_application.dev_dashboard.id
  principal = file("${path.module}/test3.pem")
}



resource "axual_application_principal" "dev_dashboard_in_staging_principal" {
  environment = axual_environment.staging.id
  application = axual_application.dev_dashboard.id
  principal = file("${path.module}/test3.pem")
}

resource "axual_application_principal" "log_scraper_in_example_principal" {
  environment = "7237a4093d7948228d431a603c31c904"
  application = axual_application.log_scraper.id
  principal = file("${path.module}/test3.pem")
}

resource "axual_application_principal" "log_scraper_in_staging_principal" {
  environment = axual_environment.staging.id
  application = axual_application.log_scraper.id
  principal = file("${path.module}/test3.pem")
}

#Environment needs to support OAUTH for OAUTH bearer application principal to work
#resource "axual_application_principal" "test_application_principal5" {
#  environment = "7237a4093d7948228d431a603c31c904"
#  application = axual_application.gitops_test_application_3.id
#  principal = "axual-test-0000"
#  custom = true
#}
```

## Import

Import is not currently supported.