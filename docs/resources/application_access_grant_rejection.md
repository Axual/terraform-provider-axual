# axual_application_access_grant_rejection (Resource)

Application Access Grant Rejection: Reject a request to access a topic

## Note
- Rejection cannot be edited
- Only Pending grants can be rejected
- Read more: https://docs.axual.io/axual/2025.3/self-service/topic-authorizations.html#contents

## Usage
- To reject/deny a grant, create an application_access_grant_rejection with the application_access_grant id.

## Required Roles
- STREAM_ADMIN or be part of the Team that owns the Topic

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `application_access_grant` (String) Application Access Grant Unique Identifier.

### Optional

- `reason` (String) Reason for denying approval.

## State Synchronization

~> **Important:** After creating this resource, the `axual_application_access_grant` resource's `status` attribute in Terraform state will still show "Pending" until the next refresh. Run `terraform plan`, `terraform apply`, or `terraform refresh` to sync the state.

### Why This Happens

This is expected Terraform behavior. When one resource modifies another resource via the API, Terraform's state for the modified resource is not automatically updated. The state is only synced during the refresh phase, which runs at the start of `plan`, `apply`, and `refresh` commands.

~> **Note:** In normal workflows, you won't notice this issue because Terraform automatically refreshes state before any `plan` or `apply`. The stale state only matters if you inspect the state file immediately after creating the approval/rejection resource.

## Example Usage

```hcl
resource "axual_application_access_grant_rejection" "scraper_produce_logs_staging_rejection" {
  application_access_grant = axual_application_access_grant.scraper_produce_to_logs_in_staging.id
  depends_on = [ axual_application_access_grant.scraper_produce_to_logs_in_staging ]
}
```

For a full example which shows the capabilities of the latest TerraForm provider, check https://github.com/Axual/terraform-provider-axual/tree/master/examples/axual.

## Import

Application Access Grant Rejection can be imported using the grant's UID:

```shell
terraform import axual_application_access_grant_rejection.example 1234567890abcdef1234567890abcdef
```

### Prerequisites

- The grant must exist and be in "Rejected" status
- If the grant is not in "Rejected" status, import will fail (the rejection resource is removed from state)

### The `reason` Attribute

The `reason` attribute is stored as `comment` in the API. After import, the reason will be correctly populated from the API response.

### Notes

- The grant UID can be found in the Axual Self-Service UI or via the API
- After import, the `application_access_grant` attribute will contain the grant UID